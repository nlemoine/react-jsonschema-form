"use strict";(self.webpackChunk_rjsf_docs=self.webpackChunk_rjsf_docs||[]).push([[6991],{1184:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>o});var t=i(4041);const a={},r=t.createContext(a);function s(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),t.createElement(r.Provider,{value:n},e.children)}},5255:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"api-reference/dynamic-ui-schema-examples","title":"Dynamic uiSchema Examples","description":"Backward Compatibility Examples","source":"@site/docs/api-reference/dynamic-ui-schema-examples.md","sourceDirName":"api-reference","slug":"/api-reference/dynamic-ui-schema-examples","permalink":"/react-jsonschema-form/docs/api-reference/dynamic-ui-schema-examples","draft":false,"unlisted":false,"editUrl":"https://github.com/rjsf-team/react-jsonschema-form/tree/main/packages/docs/docs/api-reference/dynamic-ui-schema-examples.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"LayoutGridField","permalink":"/react-jsonschema-form/docs/api-reference/LayoutGridField"},"next":{"title":"<Form /> Props","permalink":"/react-jsonschema-form/docs/api-reference/form-props"}}');var a=i(1085),r=i(1184);const s={},o="Dynamic uiSchema Examples",c={},l=[{value:"Backward Compatibility Examples",id:"backward-compatibility-examples",level:2},{value:"Example 1: Traditional Static uiSchema (No Changes Required)",id:"example-1-traditional-static-uischema-no-changes-required",level:3},{value:"Example 2: Dynamic uiSchema with Function",id:"example-2-dynamic-uischema-with-function",level:3},{value:"Example 3: Using Form Context",id:"example-3-using-form-context",level:3},{value:"Example 4: Falsy Return Values",id:"example-4-falsy-return-values",level:3},{value:"Example 5: Dynamic UI for Fixed Arrays",id:"example-5-dynamic-ui-for-fixed-arrays",level:3},{value:"Schema Example",id:"schema-example",level:2},{value:"Key Benefits",id:"key-benefits",level:2},{value:"Key Behaviors",id:"key-behaviors",level:2},{value:"Performance Considerations",id:"performance-considerations",level:2}];function m(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"dynamic-uischema-examples",children:"Dynamic uiSchema Examples"})}),"\n",(0,a.jsx)(n.h2,{id:"backward-compatibility-examples",children:"Backward Compatibility Examples"}),"\n",(0,a.jsx)(n.h3,{id:"example-1-traditional-static-uischema-no-changes-required",children:"Example 1: Traditional Static uiSchema (No Changes Required)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"import { UiSchema } from '@rjsf/utils';\n\n// This continues to work exactly as before\nconst uiSchema: UiSchema = {\n  guests: {\n    items: {\n      name: { 'ui:placeholder': 'Enter guest name' },\n      age: { 'ui:widget': 'updown' },\n      relationship: { 'ui:widget': 'select' },\n    },\n  },\n};\n"})}),"\n",(0,a.jsx)(n.h3,{id:"example-2-dynamic-uischema-with-function",children:"Example 2: Dynamic uiSchema with Function"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"import { UiSchema, FormContextType } from '@rjsf/utils';\n\ninterface GuestData {\n  name?: string;\n  age?: number;\n  relationship?: 'child' | 'adult' | 'senior';\n  guardianName?: string;\n  mealPreference?: string;\n}\n\n// New functionality - dynamic UI based on item data\nconst uiSchema: UiSchema = {\n  guests: {\n    items: (itemData: GuestData | undefined, index: number, formContext?: FormContextType): UiSchema => {\n      // Note: For newly added items, `itemData` will be undefined or contain default values.\n      // Using optional chaining (`?.`) is recommended to handle this case gracefully.\n\n      // Base UI schema for all items\n      const baseUiSchema: UiSchema = {\n        name: { 'ui:placeholder': `Guest ${index + 1} name` },\n        relationship: { 'ui:widget': 'select' },\n      };\n\n      // Conditionally modify UI based on data\n      if (itemData?.relationship === 'child') {\n        return {\n          ...baseUiSchema,\n          age: {\n            'ui:widget': 'updown',\n            'ui:help': 'Age is required for children',\n            'ui:options': { min: 0, max: 17 },\n          },\n          guardianName: {\n            'ui:placeholder': 'Parent/Guardian name',\n          },\n          mealPreference: { 'ui:widget': 'hidden' },\n        };\n      }\n\n      if (itemData?.relationship === 'adult') {\n        return {\n          ...baseUiSchema,\n          age: { 'ui:widget': 'hidden' },\n          guardianName: { 'ui:widget': 'hidden' },\n          mealPreference: {\n            'ui:widget': 'select',\n            'ui:placeholder': 'Select meal preference',\n          },\n        };\n      }\n\n      // Default for new items or unknown relationships\n      return baseUiSchema;\n    },\n  },\n};\n"})}),"\n",(0,a.jsx)(n.h3,{id:"example-3-using-form-context",children:"Example 3: Using Form Context"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"import { UiSchema, FormContextType } from '@rjsf/utils';\n\ninterface ParticipantData {\n  name?: string;\n  email?: string;\n  workshop?: string;\n}\n\ninterface MyFormContext extends FormContextType {\n  eventType?: 'conference' | 'workshop' | 'webinar';\n}\n\nconst uiSchema: UiSchema<any, any, MyFormContext> = {\n  participants: {\n    items: (itemData: ParticipantData | undefined, index: number, formContext?: MyFormContext): UiSchema => {\n      // Access form-wide settings\n      const isConference = formContext?.eventType === 'conference';\n\n      return {\n        name: { 'ui:placeholder': 'Participant name' },\n        email: { 'ui:widget': 'email' },\n        // Show workshop selection only for conference events\n        workshop: isConference ? { 'ui:widget': 'select' } : { 'ui:widget': 'hidden' },\n      };\n    },\n  },\n};\n"})}),"\n",(0,a.jsx)(n.h3,{id:"example-4-falsy-return-values",children:"Example 4: Falsy Return Values"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"import { UiSchema, FormContextType } from '@rjsf/utils';\n\ninterface ItemData {\n  needsCustomUI?: boolean;\n  field1?: string;\n  field2?: string;\n}\n\nconst uiSchema: UiSchema = {\n  items: {\n    items: (itemData: ItemData | undefined, index: number): UiSchema | null | undefined => {\n      // Only apply custom UI to specific items\n      if (itemData?.needsCustomUI) {\n        return {\n          field1: { 'ui:widget': 'textarea' },\n          field2: { 'ui:help': 'This item needs special attention' },\n        };\n      }\n\n      // Return null or undefined to use default UI rendering\n      // This is useful for conditionally applying custom UI\n      return null;\n    },\n  },\n};\n"})}),"\n",(0,a.jsx)(n.h3,{id:"example-5-dynamic-ui-for-fixed-arrays",children:"Example 5: Dynamic UI for Fixed Arrays"}),"\n",(0,a.jsx)(n.p,{children:"For fixed/tuple arrays (where schema.items is an array), the dynamic function can be applied to each position:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"import { RJSFSchema, UiSchema } from '@rjsf/utils';\n\ninterface DetailsData {\n  age?: number;\n  role?: string;\n}\n\nconst schema: RJSFSchema = {\n  type: 'array',\n  items: [\n    { type: 'string', title: 'First Name' },\n    { type: 'string', title: 'Last Name' },\n    { type: 'object', title: 'Details', properties: { age: { type: 'number' }, role: { type: 'string' } } },\n  ],\n};\n\nconst uiSchema: UiSchema = {\n  items: [\n    { 'ui:placeholder': 'Enter first name' }, // Static UI for first item\n    { 'ui:placeholder': 'Enter last name' }, // Static UI for second item\n    // Dynamic UI for third item based on its data\n    (itemData: DetailsData | undefined, index: number): UiSchema => {\n      if (itemData?.role === 'admin') {\n        return {\n          age: { 'ui:widget': 'hidden' },\n          role: { 'ui:help': 'Admin role selected' },\n        };\n      }\n      return {\n        age: { 'ui:widget': 'updown' },\n        role: { 'ui:widget': 'select' },\n      };\n    },\n  ],\n};\n"})}),"\n",(0,a.jsx)(n.h2,{id:"schema-example",children:"Schema Example"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"import { RJSFSchema } from '@rjsf/utils';\n\nconst schema: RJSFSchema = {\n  type: 'object',\n  properties: {\n    guests: {\n      type: 'array',\n      items: {\n        type: 'object',\n        properties: {\n          name: { type: 'string', title: 'Name' },\n          age: { type: 'number', title: 'Age' },\n          relationship: {\n            type: 'string',\n            title: 'Relationship',\n            enum: ['adult', 'child', 'senior'],\n          },\n          guardianName: { type: 'string', title: 'Guardian Name' },\n          mealPreference: {\n            type: 'string',\n            title: 'Meal Preference',\n            enum: ['vegetarian', 'vegan', 'standard', 'gluten-free'],\n          },\n        },\n        required: ['name', 'relationship'],\n      },\n    },\n  },\n};\n"})}),"\n",(0,a.jsx)(n.h2,{id:"key-benefits",children:"Key Benefits"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Backward Compatible"}),": Existing forms with object-based ",(0,a.jsx)(n.code,{children:"uiSchema.items"})," continue to work without any changes"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Progressive Enhancement"}),": Developers can opt-in to dynamic behavior when needed"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Flexible"}),": Access to item data, index, and form context enables complex UI logic"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Safe"}),": Built-in error handling prevents the entire form from crashing if your function throws an error. When an error occurs for a specific item, it will be caught and logged to the developer console, and the UI for that item will fall back to the default rendering. This ensures the rest of the form remains functional while making debugging easier."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"On-Demand Execution"}),": The function is executed on-demand during the render cycle. However, as it runs for each array item, performance should be carefully managed for large lists (see Performance Considerations below)."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"key-behaviors",children:"Key Behaviors"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Falsy Returns"}),": If your function returns a falsy value (e.g., ",(0,a.jsx)(n.code,{children:"null"})," or ",(0,a.jsx)(n.code,{children:"undefined"}),"), the UI for that specific item will fall back to its default rendering. This allows you to conditionally apply custom UI only when needed."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Error Handling"}),": If your function throws an error, it will be caught and logged to the console. The form will continue to work, using default UI for the affected item."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"New Items"}),": When a new item is added to the array, ",(0,a.jsx)(n.code,{children:"itemData"})," will be ",(0,a.jsx)(n.code,{children:"undefined"})," or contain default values from the schema. Always use optional chaining (",(0,a.jsx)(n.code,{children:"?."}),") to safely access properties."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,a.jsxs)(n.p,{children:["When using dynamic ",(0,a.jsx)(n.code,{children:"uiSchema.items"})," functions, keep in mind:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["The function is executed ",(0,a.jsx)(n.strong,{children:"on every render"})," for ",(0,a.jsx)(n.strong,{children:"each array item"})]}),"\n",(0,a.jsx)(n.li,{children:"For large arrays, this can impact performance if the function performs expensive operations"}),"\n",(0,a.jsxs)(n.li,{children:["Best practices:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Keep the function logic lightweight and fast"}),"\n",(0,a.jsx)(n.li,{children:"Avoid heavy computations or external API calls within the function"}),"\n",(0,a.jsx)(n.li,{children:"Consider memoizing results if the same inputs produce the same outputs"}),"\n",(0,a.jsx)(n.li,{children:"For complex logic, pre-compute values and store them in formContext or component state"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Example of a performance-optimized approach:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"import React, { PropsWithChildren, useMemo } from 'react';\nimport Form from '@rjsf/core';\nimport { RJSFSchema, UiSchema, FormContextType, IChangeEvent } from '@rjsf/utils';\n\ninterface ItemData {\n  type?: string;\n  field?: any;\n}\n\ninterface ExpensiveDataConfig {\n  widget: string;\n}\n\ninterface MyFormProps {\n  schema: RJSFSchema;\n  formData?: any;\n}\n\n// In your React component that renders the form:\nfunction MyFormComponent({ schema, formData }: PropsWithChildren<MyFormProps>) {\n  // Pre-compute expensive data once, and only re-compute if dependencies change\n  const expensiveData = useMemo<Record<string, ExpensiveDataConfig>>(() => computeExpensiveData(), [/* dependencies */]);\n\n  const defaultConfig: ExpensiveDataConfig = { widget: 'text' };\n\n  // Define the uiSchema inside the component so it can access the memoized data\n  const uiSchema: UiSchema = {\n    myArrayField: { // Target your specific array field\n      items: (itemData: ItemData | undefined, index: number, formContext?: FormContextType): UiSchema => {\n        // Use the pre-computed data - this is very fast\n        const config = expensiveData[itemData?.type || ''] || defaultConfig;\n\n        return {\n          field: { 'ui:widget': config.widget }\n        };\n      }\n    }\n  };\n\n  return <Form schema={schema} uiSchema={uiSchema} formData={formData} />;\n}\n\n// Placeholder for the expensive computation function\ndeclare function computeExpensiveData(): Record<string, ExpensiveDataConfig>;\n"})})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(m,{...e})}):m(e)}}}]);